<div class="container mt-5">

    <!-- TABELLA STORE -->
    <div *ngIf="!isSingleProduct; else productDetails" class="mt-3">
        <h1>Registro Prodotti</h1>
        <!-- FILTER -->
        <mat-form-field>
            <mat-label>Cerca</mat-label>
            <input matInput (keyup)="applyFilter($event)" #input>
        </mat-form-field>
        <!-- / FILTER -->

        <div class="mat-elevation-z8 overflow-auto" style="max-height: 500px;">
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort
                (matSortChange)="announceSortChange($event)">
                <!-- Id Column -->
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by id">
                        Id
                    </th>
                    <td mat-cell *matCellDef="let product">{{product.id}}</td>
                </ng-container>
                <!-- Nome Column -->
                <ng-container matColumnDef="titolo">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by titolo">
                        Nome
                    </th>
                    <td mat-cell *matCellDef="let product">{{product.titolo}}</td>
                </ng-container>
                <!-- Prezzo Column -->
                <ng-container matColumnDef="prezzo">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by prezzo">
                        Prezzo
                    </th>
                    <td mat-cell *matCellDef="let product">{{product.prezzo}}</td>
                </ng-container>
                <!-- Btn Dettagli -->
                <ng-container matColumnDef="dettagli">
                    <th mat-header-cell *matHeaderCellDef>
                    </th>
                    <td mat-cell *matCellDef="let product">
                        <button mat-icon-button aria-label="Example icon button with a vertical three dot icon"
                            routerLink="/store/{{product.id}}">
                            <mat-icon>more_horizontal</mat-icon>
                        </button>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                <!-- Visibile quando non ci sono dati corrispondenti. -->
                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">Nessun prodotto corrispondente a "{{input.value}}"</td>
                </tr>
            </table>
            <!-- / TABELLA STORE -->
        </div>
        <!-- PAGINAZIONE -->
        <div class="mat-elevation-z8">
            <mat-paginator [pageSizeOptions]="[5, 10, 20, 25]" showFirstLastButtons
                aria-label="Select page of periodic elements" mat-footer-row>
            </mat-paginator>
        </div>
        <!-- / PAGINAZIONE -->
    </div>
    <!-- CARD DETTAGLI PRODOTTO -->
    <ng-template #productDetails>
        <mat-card class="example-card">
            <mat-card-header>
                <mat-card-title>Dettagli Prodotto</mat-card-title>
                <mat-card-subtitle><strong>Id:</strong> {{product.id}}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <p><strong>Nome Prodotto: </strong>{{product.titolo}}</p>
                <p><strong>Prezzo: </strong>{{product.prezzo}}</p>
                <p><strong>Categoria: </strong>{{product.categoria}}</p>
                <p><strong>N. pezzi: </strong>{{product.n_pezzi}}</p>
            </mat-card-content>
            <mat-card-actions>
                <button mat-button routerLink="/store">Torna ai prodotti</button>
            </mat-card-actions>
        </mat-card>
    </ng-template>
    <!-- / CARD DETTAGLI PRODOTTO -->
</div>
