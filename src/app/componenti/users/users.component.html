<div class="container mt-5">

    <!-- TABELLA UTENTI -->
    <div *ngIf="!isSingleUser; else userDetails" class="mt-3">
        <h1>Registro Utenti</h1>
        <!-- FILTER -->
        <mat-form-field>
            <mat-label>Cerca</mat-label>
            <input matInput (keyup)="applyFilter($event)" #input>
        </mat-form-field>
        <!-- / FILTER -->
        <div class="mat-elevation-z8 overflow-auto" style="max-height: 500px;">
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort
                (matSortChange)="announceSortChange($event)">
                <!-- Id Column -->
                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by id">
                        Id
                    </th>
                    <td mat-cell *matCellDef="let user">{{user.id}}</td>
                </ng-container>
                <!-- Nome Column -->
                <ng-container matColumnDef="nome">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by nome">
                        Nome
                    </th>
                    <td mat-cell *matCellDef="let user">{{user.nome}}</td>
                </ng-container>
                <!-- Cognome Column -->
                <ng-container matColumnDef="cognome">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by cognome">
                        Cognome
                    </th>
                    <td mat-cell *matCellDef="let user"> {{user.cognome}}</td>
                </ng-container>
                <!-- Email Column -->
                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by email">
                        Email
                    </th>
                    <td mat-cell *matCellDef="let user"> {{user.email}} </td>
                </ng-container>
                <!-- Btn Dettagli -->
                <ng-container matColumnDef="dettagli">
                    <th mat-header-cell *matHeaderCellDef>
                    </th>
                    <td mat-cell *matCellDef="let user">
                        <button mat-icon-button aria-label="Example icon button with a vertical three dot icon"
                            routerLink="/utenti/{{user.id}}">
                            <mat-icon>more_horizontal</mat-icon>
                        </button>
                    </td>
                </ng-container>


                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                <!-- Visibile quando non ci sono dati corrispondenti. -->
                <tr class="mat-row" *matNoDataRow>
                    <td class="mat-cell" colspan="4">Nessun utente corrispondente a "{{input.value}}"</td>
                </tr>

            </table>
            <!-- / TABELLA UTENTI -->
        </div>
        <!-- PAGINAZIONE -->
        <div class="mat-elevation-z8">
            <mat-paginator [pageSizeOptions]="[5, 10, 20, 25]" showFirstLastButtons
                aria-label="Select page of users elements">
            </mat-paginator>
        </div>
        <!-- / PAGINAZIONE -->
    </div>
    <!-- CARD DETTAGLI UTENTE -->
    <ng-template #userDetails>
        <mat-card class="example-card">
            <mat-card-header>
                <mat-card-title>Dettagli Utente</mat-card-title>
                <mat-card-subtitle><strong>Id:</strong> {{user.id}}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <p><strong>Nome: </strong>{{user.nome}}</p>
                <p><strong>Cognome: </strong>{{user.cognome}}</p>
                <p><strong>Et√†: </strong>{{user.eta}}</p>
                <p><strong>Email: </strong>{{user.email}}</p>
                <p><strong>Indirizzo: </strong>{{user.indirizzo}}</p>
            </mat-card-content>
            <mat-card-actions>
                <button mat-button routerLink="/utenti">Torna agli utenti</button>
            </mat-card-actions>
        </mat-card>
    </ng-template>
    <!-- / CARD DETTAGLI UTENTE -->
</div>
